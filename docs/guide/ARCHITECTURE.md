# AI ìë™ë§¤ë§¤ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

## ğŸ“‹ ì‹œìŠ¤í…œ ê°œìš”

AI ê¸°ë°˜ ì•”í˜¸í™”í ìë™ë§¤ë§¤ ì‹œìŠ¤í…œìœ¼ë¡œ, **ë©€í‹°ì½”ì¸ ìŠ¤ìºë‹ + ì ì‘í˜• íŒŒì´í”„ë¼ì¸ ì•„í‚¤í…ì²˜**ì…ë‹ˆë‹¤.

**ì‹¤ì „ ê±°ë˜**ì™€ **ë°±í…ŒìŠ¤íŒ…** ë‘ ê°€ì§€ ëª¨ë“œë¥¼ ì§€ì›í•˜ë©°, ìŠ¤ì¼€ì¤„ëŸ¬ ê¸°ë°˜ ìë™ ê±°ë˜ì™€ Grafana ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œë¥¼ ì œê³µí•©ë‹ˆë‹¤.

### í•µì‹¬ ì»´í¬ë„ŒíŠ¸

1. **Scheduler (scheduler_main.py)** - 1ì‹œê°„ ì£¼ê¸° ìë™ ê±°ë˜ ì‹¤í–‰
2. **Adaptive Trading Pipeline** - 5ë‹¨ê³„ ì ì‘í˜• íŒŒì´í”„ë¼ì¸ (Risk â†’ Scan â†’ Data â†’ Analysis â†’ Execution)
3. **Multi-Coin Scanner** - ìœ ë™ì„± ìŠ¤ìº” â†’ ë°±í…ŒìŠ¤íŒ… â†’ AI ë¶„ì„ â†’ ìµœì  ì½”ì¸ ì„ íƒ
4. **Portfolio Manager** - ìµœëŒ€ 3ê°œ ì½”ì¸ ë™ì‹œ ê´€ë¦¬, í•˜ì´ë¸Œë¦¬ë“œ í¬ì§€ì…˜ ê´€ë¦¬
5. **PostgreSQL** - ê±°ë˜ ë°ì´í„° ì €ì¥ (Grafana ì—°ë™)
6. **Grafana + Prometheus** - ëª¨ë‹ˆí„°ë§ ë° ì‹œê°í™”

## ğŸ— ì „ì²´ ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Scheduler (scheduler_main.py) - 1ì‹œê°„ ì£¼ê¸° â°               â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚         Adaptive Trading Pipeline (5-Stage Architecture)       â”‚    â”‚
â”‚  â”‚                                                                  â”‚    â”‚
â”‚  â”‚  1. AdaptiveRiskCheckStage - í¬íŠ¸í´ë¦¬ì˜¤ ìƒíƒœ í™•ì¸ & ëª¨ë“œ ë¶„ê¸°   â”‚    â”‚
â”‚  â”‚     â”œâ”€ ENTRY MODE (í¬ì§€ì…˜ ì—†ìŒ/ì¶”ê°€ ê°€ëŠ¥)                       â”‚    â”‚
â”‚  â”‚     â””â”€ MANAGEMENT MODE (í¬ì§€ì…˜ ìˆìŒ â†’ í•˜ì´ë¸Œë¦¬ë“œ ê´€ë¦¬)          â”‚    â”‚
â”‚  â”‚                                                                  â”‚    â”‚
â”‚  â”‚  2. CoinScanStage - ë©€í‹°ì½”ì¸ ìŠ¤ìºë‹ (ENTRY MODEì—ì„œë§Œ)          â”‚    â”‚
â”‚  â”‚     â”œâ”€ LiquidityScanner: ìƒìœ„ 20ê°œ ìœ ë™ì„± ì½”ì¸                  â”‚    â”‚
â”‚  â”‚     â”œâ”€ MultiCoinBacktest: 12ê°€ì§€ í€€íŠ¸ í•„í„° (ë³‘ë ¬ ì²˜ë¦¬)          â”‚    â”‚
â”‚  â”‚     â””â”€ CoinSelector: ìµœì¢… 2ê°œ ì½”ì¸ ì„ íƒ                         â”‚    â”‚
â”‚  â”‚                                                                  â”‚    â”‚
â”‚  â”‚  3. DataCollectionStage - ë°ì´í„° ìˆ˜ì§‘                           â”‚    â”‚
â”‚  â”‚  4. AnalysisStage - AI ì§„ì… ë¶„ì„ + ê²€ì¦                         â”‚    â”‚
â”‚  â”‚  5. ExecutionStage - ê±°ë˜ ì‹¤í–‰                                  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    Monitoring & Notification                    â”‚    â”‚
â”‚  â”‚  â€¢ Telegram Bot (ì‹¤ì‹œê°„ ì•Œë¦¼)                                   â”‚    â”‚
â”‚  â”‚  â€¢ Sentry (ì—ëŸ¬ ì¶”ì )                                           â”‚    â”‚
â”‚  â”‚  â€¢ Structured Logging                                           â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Data Layer (PostgreSQL)                          â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   Trades    â”‚  â”‚  AI Logs    â”‚  â”‚  Portfolio  â”‚  â”‚  Scan Logs  â”‚   â”‚
â”‚  â”‚   (ê±°ë˜)    â”‚  â”‚ (AI íŒë‹¨)   â”‚  â”‚ (í¬íŠ¸í´ë¦¬ì˜¤)â”‚  â”‚ (ìŠ¤ìº” ê²°ê³¼) â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          Monitoring Stack                               â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚  â”‚  Prometheus  â”‚  â”‚   Grafana    â”‚                                    â”‚
â”‚  â”‚ (ë©”íŠ¸ë¦­ ìˆ˜ì§‘) â”‚  â”‚ (ì‹œê°í™”)     â”‚                                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          External Services                              â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚ Upbit API    â”‚  â”‚ OpenAI API   â”‚  â”‚ Telegram API â”‚                  â”‚
â”‚  â”‚  (ê±°ë˜ì†Œ)    â”‚  â”‚   (AI)       â”‚  â”‚   (ì•Œë¦¼)     â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ ë©€í‹°ì½”ì¸ ìŠ¤ìºë‹ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ë§¤ ì‹œê°„ ê±°ë˜ ì‚¬ì´í´                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚  AdaptiveRiskCheckStage â”‚
                   â”‚  (í¬íŠ¸í´ë¦¬ì˜¤ ìƒíƒœ í™•ì¸)  â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â–¼                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        ENTRY MODE           â”‚    â”‚      MANAGEMENT MODE        â”‚
â”‚    (í¬ì§€ì…˜ ì—†ìŒ/ì¶”ê°€ê°€ëŠ¥)    â”‚    â”‚       (í¬ì§€ì…˜ ìˆìŒ)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                             â”‚    â”‚                             â”‚
â”‚  1. ìœ ë™ì„± ìŠ¤ìº” (20ê°œ)      â”‚    â”‚  1. ê·œì¹™ ê¸°ë°˜ ì²´í¬ (ë¬´ë£Œ)   â”‚
â”‚     â””â”€ 100ì–µì›+ ê±°ë˜ëŒ€ê¸ˆ    â”‚    â”‚     â”œâ”€ ì†ì ˆ -5%            â”‚
â”‚     â””â”€ ìŠ¤í…Œì´ë¸”ì½”ì¸ ì œì™¸    â”‚    â”‚     â”œâ”€ ìµì ˆ +10%           â”‚
â”‚                             â”‚    â”‚     â”œâ”€ Fakeout ê°ì§€        â”‚
â”‚  2. ë³‘ë ¬ ë°±í…ŒìŠ¤íŒ… (5ê°œ)     â”‚    â”‚     â”œâ”€ íƒ€ì„ì•„ì›ƒ (24h)      â”‚
â”‚     â””â”€ 12ê°€ì§€ í€€íŠ¸ í•„í„°     â”‚    â”‚     â””â”€ íŠ¸ë ˆì¼ë§ ìŠ¤íƒ‘       â”‚
â”‚     â””â”€ Sharpe/Sortino/Calmarâ”‚    â”‚                             â”‚
â”‚                             â”‚    â”‚  2. AI ë¶„ì„ (ì• ë§¤í•  ë•Œë§Œ)   â”‚
â”‚  3. AI ì§„ì… ë¶„ì„ (2ê°œ)      â”‚    â”‚     â”œâ”€ ìˆ˜ìµ 2%~8% êµ¬ê°„     â”‚
â”‚     â””â”€ ë¦¬ìŠ¤í¬ í—Œí„° ì—­í•      â”‚    â”‚     â”œâ”€ ADX 25-30 êµ¬ê°„      â”‚
â”‚                             â”‚    â”‚     â””â”€ ê±°ë˜ëŸ‰-ê°€ê²© ê´´ë¦¬    â”‚
â”‚  4. ìµœì  ì½”ì¸ ì„ íƒ          â”‚    â”‚                             â”‚
â”‚     â””â”€ ë°±í…ŒìŠ¤íŒ… 60%+AI 40%  â”‚    â”‚  â†’ ì²­ì‚°/ë³´ìœ  ê²°ì •          â”‚
â”‚                             â”‚    â”‚                             â”‚
â”‚  5. ì§„ì… ì‹¤í–‰               â”‚    â”‚                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

### ì „ì²´ ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
dg_bot/
â”œâ”€â”€ main.py                    # ì‹¤ì „ íŠ¸ë ˆì´ë”© ë©”ì¸ ìŠ¤í¬ë¦½íŠ¸ (íŒŒì´í”„ë¼ì¸)
â”œâ”€â”€ scheduler_main.py          # ìŠ¤ì¼€ì¤„ëŸ¬ ì§„ì…ì  (1ì‹œê°„ ì£¼ê¸°)
â”‚
â”œâ”€â”€ src/                       # í•µì‹¬ ì†ŒìŠ¤ ì½”ë“œ
â”‚   â”œâ”€â”€ api/                   # API í´ë¼ì´ì–¸íŠ¸
â”‚   â”‚   â”œâ”€â”€ interfaces.py
â”‚   â”‚   â””â”€â”€ upbit_client.py    # Upbit API í´ë¼ì´ì–¸íŠ¸
â”‚   â”‚
â”‚   â”œâ”€â”€ ai/                    # AI ì„œë¹„ìŠ¤ (ë¶„ë¦¬ëœ ë¶„ì„ê¸°)
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ service.py         # AIService - ê¸°ì¡´ í˜¸í™˜ì„± ìœ ì§€
â”‚   â”‚   â”œâ”€â”€ entry_analyzer.py  # ğŸ†• EntryAnalyzer - ì§„ì… ì „ìš© ë¶„ì„ê¸°
â”‚   â”‚   â”œâ”€â”€ position_analyzer.py # ğŸ†• PositionAnalyzer - í•˜ì´ë¸Œë¦¬ë“œ í¬ì§€ì…˜ ê´€ë¦¬
â”‚   â”‚   â”œâ”€â”€ validator.py       # AI Decision Validator (ê²€ì¦)
â”‚   â”‚   â””â”€â”€ market_correlation.py
â”‚   â”‚
â”‚   â”œâ”€â”€ backtesting/           # ë°±í…ŒìŠ¤íŒ… ì—”ì§„
â”‚   â”‚   â”œâ”€â”€ data_provider.py   # ê³¼ê±° ë°ì´í„° ë¡œë” (ìºì‹œ ìš°ì„ )
â”‚   â”‚   â”œâ”€â”€ backtester.py      # ë°±í…ŒìŠ¤íŒ… ì—”ì§„
â”‚   â”‚   â”œâ”€â”€ runner.py          # ë°±í…ŒìŠ¤íŠ¸ ì‹¤í–‰ê¸°
â”‚   â”‚   â”œâ”€â”€ strategy.py        # ì „ëµ ì¸í„°í˜ì´ìŠ¤
â”‚   â”‚   â”œâ”€â”€ rule_based_strategy.py  # ë£° ê¸°ë°˜ ì „ëµ (ë³€ë™ì„± ëŒíŒŒ)
â”‚   â”‚   â”œâ”€â”€ quick_filter.py    # ë¹ ë¥¸ ë°±í…ŒìŠ¤íŒ… í•„í„°ë§ (12ê°€ì§€ í€€íŠ¸ ê¸°ì¤€)
â”‚   â”‚   â”œâ”€â”€ portfolio.py       # í¬íŠ¸í´ë¦¬ì˜¤ ê´€ë¦¬
â”‚   â”‚   â””â”€â”€ performance.py     # ì„±ëŠ¥ ë¶„ì„
â”‚   â”‚
â”‚   â”œâ”€â”€ scanner/               # ğŸ†• ë©€í‹°ì½”ì¸ ìŠ¤ìºë‹ ëª¨ë“ˆ
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ liquidity_scanner.py  # ìœ ë™ì„± ìŠ¤ìº” (ìƒìœ„ 20ê°œ)
â”‚   â”‚   â”œâ”€â”€ data_sync.py          # ê³¼ê±° ë°ì´í„° ë™ê¸°í™” (Parquet)
â”‚   â”‚   â”œâ”€â”€ multi_backtest.py     # ë³‘ë ¬ ë°±í…ŒìŠ¤íŒ… (12ê°€ì§€ í€€íŠ¸ í•„í„°)
â”‚   â”‚   â””â”€â”€ coin_selector.py      # ì½”ì¸ ì„ íƒ íŒŒì´í”„ë¼ì¸
â”‚   â”‚
â”‚   â”œâ”€â”€ config/                # ì„¤ì •
â”‚   â”‚   â””â”€â”€ settings.py        # ì „ì—­ ì„¤ì • (TradingConfig, DataConfig, AIConfig)
â”‚   â”‚
â”‚   â”œâ”€â”€ data/                  # ì‹¤ì „ ë°ì´í„° ìˆ˜ì§‘
â”‚   â”‚   â”œâ”€â”€ collector.py       # ì‹¤ì‹œê°„ ì‹œì¥ ë°ì´í„° ìˆ˜ì§‘
â”‚   â”‚   â””â”€â”€ interfaces.py
â”‚   â”‚
â”‚   â”œâ”€â”€ position/              # í¬ì§€ì…˜ ê´€ë¦¬
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ service.py         # í¬ì§€ì…˜ ê³„ì‚° ë° ê´€ë¦¬
â”‚   â”‚   â””â”€â”€ portfolio_manager.py # ğŸ†• PortfolioManager - ë©€í‹°ì½”ì¸ í¬íŠ¸í´ë¦¬ì˜¤ ê´€ë¦¬
â”‚   â”‚
â”‚   â”œâ”€â”€ risk/                  # ë¦¬ìŠ¤í¬ ê´€ë¦¬ ëª¨ë“ˆ
â”‚   â”‚   â”œâ”€â”€ manager.py         # RiskManager (Circuit Breaker, ì†ì ˆ/ìµì ˆ)
â”‚   â”‚   â””â”€â”€ state_manager.py   # JSON-based state persistence
â”‚   â”‚
â”‚   â”œâ”€â”€ trading/               # ê±°ë˜ ë¡œì§
â”‚   â”‚   â”œâ”€â”€ service.py         # ê±°ë˜ ì‹¤í–‰ ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ liquidity_analyzer.py  # Orderbook-based slippage calculation
â”‚   â”‚   â”œâ”€â”€ indicators.py      # ê¸°ìˆ ì  ì§€í‘œ (RSI, MACD, BB, ADX, ATR)
â”‚   â”‚   â”œâ”€â”€ signal_analyzer.py # ì‹ í˜¸ ë¶„ì„ê¸°
â”‚   â”‚   â””â”€â”€ pipeline/          # íŒŒì´í”„ë¼ì¸ ì•„í‚¤í…ì²˜
â”‚   â”‚       â”œâ”€â”€ __init__.py
â”‚   â”‚       â”œâ”€â”€ base_stage.py      # ë² ì´ìŠ¤ ìŠ¤í…Œì´ì§€ í´ë˜ìŠ¤
â”‚   â”‚       â”œâ”€â”€ trading_pipeline.py # íŒŒì´í”„ë¼ì¸ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°
â”‚   â”‚       â”œâ”€â”€ risk_stage.py      # ë¦¬ìŠ¤í¬ ì²´í¬ ìŠ¤í…Œì´ì§€
â”‚   â”‚       â”œâ”€â”€ adaptive_stage.py  # ğŸ†• AdaptiveRiskCheckStage (í¬ì§€ì…˜ ë¶„ê¸°)
â”‚   â”‚       â”œâ”€â”€ coin_scan_stage.py # ğŸ†• CoinScanStage (ë©€í‹°ì½”ì¸ ìŠ¤ìºë‹)
â”‚   â”‚       â”œâ”€â”€ data_stage.py      # ë°ì´í„° ìˆ˜ì§‘ ìŠ¤í…Œì´ì§€
â”‚   â”‚       â”œâ”€â”€ analysis_stage.py  # ë¶„ì„ ìŠ¤í…Œì´ì§€
â”‚   â”‚       â””â”€â”€ execution_stage.py # ì‹¤í–‰ ìŠ¤í…Œì´ì§€
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/                 # ìœ í‹¸ë¦¬í‹°
â”‚   â”‚   â”œâ”€â”€ logger.py          # ë¡œê¹… ìœ í‹¸ë¦¬í‹°
â”‚   â”‚   â””â”€â”€ helpers.py         # í—¬í¼ í•¨ìˆ˜
â”‚   â”‚
â”‚   â””â”€â”€ exceptions.py          # ì»¤ìŠ¤í…€ ì˜ˆì™¸
â”‚
â”œâ”€â”€ scripts/                   # ìœ í‹¸ë¦¬í‹° ìŠ¤í¬ë¦½íŠ¸
â”‚   â””â”€â”€ backtesting/           # ë°±í…ŒìŠ¤íŒ… ë°ì´í„° ìˆ˜ì§‘
â”‚       â”œâ”€â”€ data_collector.py  # Upbit ë°ì´í„° ìˆ˜ì§‘ê¸°
â”‚       â”œâ”€â”€ data_manager.py    # ë°ì´í„° ê´€ë¦¬ ë° ìºì‹±
â”‚       â””â”€â”€ data_quality.py    # ë°ì´í„° í’ˆì§ˆ ê²€ì¦ ë° ì •ì œ
â”‚
â”œâ”€â”€ backtest_data/             # ë°±í…ŒìŠ¤íŒ… ë°ì´í„° ì €ì¥ì†Œ (ìë™ ìƒì„±)
â”‚   â”œâ”€â”€ daily/                 # ì¼ë´‰ ë°ì´í„°
â”‚   â”œâ”€â”€ hourly/                # ì‹œê°„ë´‰ ë°ì´í„°
â”‚   â”œâ”€â”€ minute/                # ë¶„ë´‰ ë°ì´í„°
â”‚   â””â”€â”€ parquet/               # ğŸ†• Parquet í˜•ì‹ ë°ì´í„° (ë©€í‹°ì½”ì¸)
â”‚
â”œâ”€â”€ tests/                     # í…ŒìŠ¤íŠ¸ ì½”ë“œ
â”‚   â”œâ”€â”€ conftest.py            # pytest ê³µí†µ í”½ìŠ¤ì²˜
â”‚   â”œâ”€â”€ test_*.py              # ê°ì¢… í…ŒìŠ¤íŠ¸ íŒŒì¼
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ monitoring/                # ëª¨ë‹ˆí„°ë§ ì„¤ì •
â”‚   â”œâ”€â”€ prometheus.yml
â”‚   â””â”€â”€ grafana/
â”‚       â”œâ”€â”€ dashboards/
â”‚       â”œâ”€â”€ datasources/
â”‚       â””â”€â”€ provisioning/
â”‚
â”œâ”€â”€ docs/                      # ë¬¸ì„œ
â”‚   â”œâ”€â”€ ARCHITECTURE.md        # ì´ ë¬¸ì„œ
â”‚   â”œâ”€â”€ MULTI_COIN_IMPLEMENTATION.md  # ğŸ†• ë©€í‹°ì½”ì¸ êµ¬í˜„ ê°€ì´ë“œ
â”‚   â”œâ”€â”€ USER_GUIDE.md          # ì‚¬ìš©ì ê°€ì´ë“œ
â”‚   â”œâ”€â”€ DOCKER_GUIDE.md        # Docker ì‹¤í–‰ ê°€ì´ë“œ
â”‚   â”œâ”€â”€ SCHEDULER_GUIDE.md     # ìŠ¤ì¼€ì¤„ëŸ¬ ê°€ì´ë“œ
â”‚   â””â”€â”€ MONITORING_GUIDE.md    # ëª¨ë‹ˆí„°ë§ ê°€ì´ë“œ
â”‚
â”œâ”€â”€ docker-compose.yml         # ê¸°ë³¸ Docker Compose (ìŠ¤ì¼€ì¤„ëŸ¬)
â”œâ”€â”€ docker-compose.yml  # ì „ì²´ ìŠ¤íƒ (DB + ëª¨ë‹ˆí„°ë§)
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ requirements.txt           # Python ì˜ì¡´ì„±
â”œâ”€â”€ pytest.ini                 # pytest ì„¤ì •
â”œâ”€â”€ .env.example               # í™˜ê²½ ë³€ìˆ˜ ì˜ˆì‹œ
â””â”€â”€ README.md                  # í”„ë¡œì íŠ¸ ê°œìš”
```

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ

### Core System

- **Runtime**: Python 3.11+
- **Scheduler**: APScheduler (1ì‹œê°„ ì£¼ê¸° ìë™ ê±°ë˜)
- **Architecture**: Adaptive Pipeline Pattern (5-Stage)
- **AI**: OpenAI GPT-4 API
- **Parallel Processing**: ThreadPoolExecutor, asyncio

### Database

- **Primary DB**: PostgreSQL 15+ (Grafana ì—°ë™ìš©)
- **Data Storage**: Parquet (ë©€í‹°ì½”ì¸ ë°±í…ŒìŠ¤íŒ… ë°ì´í„°)

### Monitoring & Logging

- **Error Tracking**: Sentry
- **Metrics**: Prometheus + Grafana
- **Notification**: Telegram Bot API
- **Logging**: Structured Logging

### Infrastructure

- **Container**: Docker + Docker Compose
- **Cloud** (ì„ íƒ): AWS / GCP / DigitalOcean

## ğŸ¯ ì£¼ìš” ì»´í¬ë„ŒíŠ¸

### 1. ğŸ†• ë©€í‹°ì½”ì¸ ìŠ¤ìºë‹ ì‹œìŠ¤í…œ (`src/scanner/`)

#### LiquidityScanner (`src/scanner/liquidity_scanner.py`)

- **ì—­í• **: ì—…ë¹„íŠ¸ KRW ë§ˆì¼“ ì „ì²´ì—ì„œ ìœ ë™ì„± ìƒìœ„ ì½”ì¸ ì¶”ì¶œ
- **ì£¼ìš” ê¸°ëŠ¥**:
  - 24ì‹œê°„ ê±°ë˜ëŒ€ê¸ˆ ê¸°ì¤€ í•„í„°ë§ (100ì–µì›+)
  - ìŠ¤í…Œì´ë¸”ì½”ì¸ ìë™ ì œì™¸ (USDT, USDC, DAI ë“±)
  - ë ˆë²„ë¦¬ì§€ í† í° ì œì™¸ (2L, 2S, 3L, 3S, UP, DOWN)
  - 7ì¼ ë³€ë™ì„± (ATR) ê³„ì‚°
- **ì¶œë ¥**: `List[CoinInfo]` (ticker, volume_24h, volatility)

```python
class LiquidityScanner:
    async def scan_top_coins(
        min_volume_krw: float = 10_000_000_000,  # 100ì–µì›
        top_n: int = 20,
        include_volatility: bool = True
    ) -> List[CoinInfo]
```

#### HistoricalDataSync (`src/scanner/data_sync.py`)

- **ì—­í• **: ê³¼ê±° ë°ì´í„° ë‹¤ìš´ë¡œë“œ ë° ì¦ë¶„ ì—…ë°ì´íŠ¸
- **ì €ì¥ í˜•ì‹**: Parquet (íš¨ìœ¨ì ì¸ ì»¬ëŸ¼ ê¸°ë°˜ ì €ì¥)
- **ì£¼ìš” ê¸°ëŠ¥**:
  - 2ë…„ì¹˜ ë°ì´í„° ë™ê¸°í™”
  - ì¦ë¶„ ì—…ë°ì´íŠ¸ (ë§ˆì§€ë§‰ ë°ì´í„° ì´í›„ë§Œ)
  - 3ë…„ ì´ìƒ ì˜¤ë˜ëœ ë°ì´í„° ìë™ ì •ë¦¬

```python
class HistoricalDataSync:
    async def sync_coin_data(ticker: str, years: int = 2) -> SyncStatus
    async def sync_multiple_coins(tickers: List[str]) -> List[SyncStatus]
    def load_data(ticker: str, interval: str = "day") -> Optional[pd.DataFrame]
```

#### MultiCoinBacktest (`src/scanner/multi_backtest.py`)

- **ì—­í• **: ì—¬ëŸ¬ ì½”ì¸ì— ëŒ€í•´ ë³‘ë ¬ ë°±í…ŒìŠ¤íŒ… ì‹¤í–‰
- **ì£¼ìš” ê¸°ëŠ¥**:
  - ThreadPoolExecutor ê¸°ë°˜ ë³‘ë ¬ ì²˜ë¦¬
  - 12ê°€ì§€ í€€íŠ¸ í•„í„° ì ìš© (QuickBacktestConfigì™€ ë™ê¸°í™”)
  - ì ìˆ˜ ê¸°ë°˜ ìˆœìœ„í™” (0-100ì )
  - ë“±ê¸‰ ë¶„ë¥˜ (STRONG PASS / WEAK PASS / FAIL)

```python
@dataclass
class MultiBacktestConfig:
    # 1. ìˆ˜ìµì„± (Profitability)
    min_return: float = 15.0              # 2ë…„ ê¸°ì¤€ 15%
    min_win_rate: float = 38.0            # ìµœì†Œ ìŠ¹ë¥ 
    min_profit_factor: float = 1.8        # ìµœì†Œ ì†ìµë¹„

    # 2. ìœ„í—˜ì¡°ì • ìˆ˜ìµë¥  (Risk-Adjusted Returns)
    min_sharpe_ratio: float = 1.0
    min_sortino_ratio: float = 1.2
    min_calmar_ratio: float = 0.8

    # 3. ë¦¬ìŠ¤í¬ ê´€ë¦¬ (Risk Management)
    max_drawdown: float = 15.0
    max_consecutive_losses: int = 5
    max_volatility: float = 50.0

    # 4. í†µê³„ì  ìœ ì˜ì„±
    min_trades: int = 20

    # 5. ê±°ë˜ í’ˆì§ˆ
    min_avg_win_loss_ratio: float = 1.3
    max_avg_holding_hours: float = 168.0  # 7ì¼
```

#### CoinSelector (`src/scanner/coin_selector.py`)

- **ì—­í• **: ì „ì²´ ìŠ¤ìºë‹ íŒŒì´í”„ë¼ì¸ ì¡°ìœ¨
- **5ë‹¨ê³„ í•„í„°ë§**:
  1. ìœ ë™ì„± ìŠ¤ìº” (20ê°œ)
  2. ë°ì´í„° ë™ê¸°í™”
  3. ë³‘ë ¬ ë°±í…ŒìŠ¤íŒ… (5ê°œ í†µê³¼)
  4. AI ì§„ì… ë¶„ì„
  5. ìµœì¢… ì„ íƒ (2ê°œ)
- **ìµœì¢… ì ìˆ˜**: ë°±í…ŒìŠ¤íŒ…(60%) + AI(40%)

```python
class CoinSelector:
    async def select_coins(
        exclude_tickers: Optional[List[str]] = None,
        force_data_sync: bool = False
    ) -> ScanResult
```

### 2. ğŸ†• ì ì‘í˜• íŒŒì´í”„ë¼ì¸ (`src/trading/pipeline/`)

#### AdaptiveRiskCheckStage (`src/trading/pipeline/adaptive_stage.py`)

- **ì—­í• **: í¬íŠ¸í´ë¦¬ì˜¤ ìƒíƒœ í™•ì¸ ë° ê±°ë˜ ëª¨ë“œ ë¶„ê¸°
- **ê±°ë˜ ëª¨ë“œ**:
  - `ENTRY`: í¬ì§€ì…˜ ì—†ìŒ ë˜ëŠ” ì¶”ê°€ ê°€ëŠ¥ â†’ ì§„ì… íƒìƒ‰
  - `MANAGEMENT`: í¬ì§€ì…˜ ìˆìŒ â†’ í•˜ì´ë¸Œë¦¬ë“œ ê´€ë¦¬
  - `BLOCKED`: ì¼ì¼/ì£¼ê°„ ì†ì‹¤ í•œë„ ì´ˆê³¼

```python
class AdaptiveRiskCheckStage(BasePipelineStage):
    async def execute(self, context: PipelineContext) -> StageResult:
        # í¬íŠ¸í´ë¦¬ì˜¤ ìƒíƒœ í™•ì¸
        portfolio_state = self.portfolio_manager.get_state()

        # ëª¨ë“œ ë¶„ê¸°
        if portfolio_state.mode == 'ENTRY':
            # â†’ CoinScanStageë¡œ ì§„í–‰
        elif portfolio_state.mode == 'MANAGEMENT':
            # â†’ PositionAnalyzerë¡œ í•˜ì´ë¸Œë¦¬ë“œ ê´€ë¦¬
```

#### CoinScanStage (`src/trading/pipeline/coin_scan_stage.py`)

- **ì—­í• **: ENTRY ëª¨ë“œì—ì„œ ë©€í‹°ì½”ì¸ ìŠ¤ìºë‹ ì‹¤í–‰
- **ìŠ¤í‚µ ì¡°ê±´**: MANAGEMENT ë˜ëŠ” BLOCKED ëª¨ë“œ

```python
class CoinScanStage(BasePipelineStage):
    async def execute(self, context: PipelineContext) -> StageResult:
        if context.data.get('trading_mode') != 'ENTRY':
            return StageResult(success=True, data={'skipped': True})

        # ì½”ì¸ ìŠ¤ìº” ì‹¤í–‰
        scan_result = await self.coin_selector.select_coins(
            exclude_tickers=current_holdings
        )

        # ì„ íƒëœ ì½”ì¸ìœ¼ë¡œ í‹°ì»¤ ì—…ë°ì´íŠ¸
        context.ticker = best_coin.ticker
```

### 3. ğŸ†• í¬ì§€ì…˜ ë¶„ë¦¬ ì‹œìŠ¤í…œ (`src/ai/`, `src/position/`)

#### EntryAnalyzer (`src/ai/entry_analyzer.py`)

- **ì—­í• **: í¬ì§€ì…˜ ì—†ì„ ë•Œ ì‚¬ìš©í•˜ëŠ” ì§„ì… ì „ìš© ë¶„ì„ê¸°
- **íŠ¹ì§•**:
  - **ë¦¬ìŠ¤í¬ í—Œí„° ì—­í• **: ê±°ë˜ë¥¼ ë§‰ì„ ì´ìœ  íƒìƒ‰
  - ë°±í…ŒìŠ¤íŒ… ë“±ê¸‰ í‰ê°€ (STRONG PASS / WEAK PASS / FAIL)
  - ì§„ì… ì‹ í˜¸ ì ìˆ˜ ê³„ì‚° (0-100)

#### PositionAnalyzer (`src/ai/position_analyzer.py`)

- **ì—­í• **: í¬ì§€ì…˜ ìˆì„ ë•Œ í•˜ì´ë¸Œë¦¬ë“œ ë°©ì‹ ê´€ë¦¬
- **ê·œì¹™ ê¸°ë°˜ ì²­ì‚° ì¡°ê±´** (ë¬´ë£Œ):
  - ì†ì ˆ: -5%
  - ìµì ˆ: +10%
  - Fakeout: 3ë´‰ ë‚´ -2%
  - íƒ€ì„ì•„ì›ƒ: 24ì‹œê°„ + ìˆ˜ìµë¥  < 2%
  - ADX ì•½í™”: < 20 (6ì‹œê°„ ì´í›„)
  - íŠ¸ë ˆì¼ë§ ìŠ¤íƒ‘: +5% ì´ìƒ ì‹œ ì¡°ì •
- **AI ë¶„ì„ ì¡°ê±´** (ìœ ë£Œ, 30% ì¼€ì´ìŠ¤):
  - ì• ë§¤í•œ ìˆ˜ìµ êµ¬ê°„ (2% ~ 8%)
  - ì¶”ì„¸ ì•½í™” ì¡°ì§ (ADX 25-30)
  - ê±°ë˜ëŸ‰-ê°€ê²© ê´´ë¦¬

```python
class PositionAnalyzer:
    # ê·œì¹™ ê¸°ë°˜ ì„¤ì •
    DEFAULT_STOP_LOSS_PCT = -5.0
    DEFAULT_TAKE_PROFIT_PCT = 10.0
    FAKEOUT_THRESHOLD_PCT = -2.0
    FAKEOUT_MAX_CANDLES = 3
    TIMEOUT_HOURS = 24
    TRAILING_STOP_TRIGGER_PCT = 5.0
```

#### PortfolioManager (`src/position/portfolio_manager.py`)

- **ì—­í• **: ë©€í‹°ì½”ì¸ í¬íŠ¸í´ë¦¬ì˜¤ ë ˆë²¨ ê´€ë¦¬
- **ì„¤ì •**:
  - ìµœëŒ€ 3ê°œ ì½”ì¸ ë™ì‹œ ë³´ìœ 
  - ì½”ì¸ë‹¹ ìµœëŒ€ ìë³¸ 40%
  - ì˜ˆë¹„ ìê¸ˆ 10%
  - ì¼ì¼ ì†ì‹¤ í•œë„ -10%
  - ì£¼ê°„ ì†ì‹¤ í•œë„ -15%
- **ê±°ë˜ ëª¨ë“œ**: ENTRY / MANAGEMENT / BLOCKED

```python
class PortfolioManager:
    MAX_POSITIONS = 3
    MAX_ALLOCATION_PER_COIN = 0.4  # 40%
    MIN_POSITION_VALUE = 10000     # 1ë§Œì›
    RESERVE_RATIO = 0.1            # 10%
    PORTFOLIO_DAILY_LOSS_LIMIT = -0.10
    PORTFOLIO_WEEKLY_LOSS_LIMIT = -0.15
```

### 4. ë¦¬ìŠ¤í¬ ê´€ë¦¬ ì‹œìŠ¤í…œ (`src/risk/`)

#### RiskManager (`src/risk/manager.py`)

- **ì—­í• **: ì‹¤ì „ íˆ¬ìì˜ í•µì‹¬ - ë¦¬ìŠ¤í¬ í†µì œ ë° ì†ì‹¤ ë°©ì§€
- **ì£¼ìš” ê¸°ëŠ¥**:
  - **ì†ì ˆ/ìµì ˆ**: ê³ ì • ë¹„ìœ¨ ë˜ëŠ” ATR ê¸°ë°˜ ë™ì  ì„¤ì •
  - **Circuit Breaker**: ì¼ì¼/ì£¼ê°„ ì†ì‹¤ í•œë„ (-10%/-15%)
  - **ê±°ë˜ ë¹ˆë„ ì œí•œ**: ìµœì†Œ ê°„ê²© (4ì‹œê°„), ì¼ì¼ ìµœëŒ€ ê±°ë˜ ìˆ˜ (5íšŒ)
  - **í¬ì§€ì…˜ ì‚¬ì´ì§•**: Kelly Criterion ê¸°ë°˜ ë™ì  ê³„ì‚°
  - **Safe Mode**: ì†ì‹¤ í•œë„ ì´ˆê³¼ ì‹œ ìë™ ê±°ë˜ ì°¨ë‹¨

#### RiskStateManager (`src/risk/state_manager.py`)

- **ì—­í• **: ë¦¬ìŠ¤í¬ ìƒíƒœ ì˜ì†ì„± ê´€ë¦¬ (í”„ë¡œê·¸ë¨ ì¬ì‹œì‘ ì‹œ ìœ ì§€)
- **ì €ì¥ ë°©ì‹**: JSON íŒŒì¼ (`data/risk_state.json`)

### 5. AI ë¶„ì„ ì‹œìŠ¤í…œ (`src/ai/`)

#### AIService (`src/ai/service.py`)

- **ì—­í• **: ì¢…í•© ì‹œì¥ ë°ì´í„°ë¥¼ ë¶„ì„í•˜ì—¬ ë§¤ìˆ˜/ë§¤ë„/ë³´ìœ  ê²°ì • ìƒì„±
- **ì…ë ¥**: ì°¨íŠ¸ ë°ì´í„°, ì˜¤ë”ë¶, ê¸°ìˆ ì  ì§€í‘œ, í¬ì§€ì…˜ ì •ë³´, ë°±í…ŒìŠ¤íŒ… ê²°ê³¼
- **ì¶œë ¥**: decision (buy/sell/hold), confidence, reason

#### AIDecisionValidator (`src/ai/validator.py`)

- **ì—­í• **: AI íŒë‹¨ì˜ ë…¼ë¦¬ì  ì •í•©ì„± ê²€ì¦ ("Trust, but Verify")
- **ê²€ì¦ í•­ëª©**:
  1. RSI ëª¨ìˆœ ì²´í¬
  2. ATR ë³€ë™ì„± ì²´í¬
  3. Fakeout ê°ì§€
  4. ì‹œì¥ í™˜ê²½ ì²´í¬

### 6. ê±°ë˜ ì‹¤í–‰ ì‹œìŠ¤í…œ (`src/trading/`)

#### TradingService (`src/trading/service.py`)

- ì‹¤ì œ ê±°ë˜ ì£¼ë¬¸ ì‹¤í–‰
- IExchangeClient ì¸í„°í˜ì´ìŠ¤ ì‚¬ìš© (ì˜ì¡´ì„± ì—­ì „)
- ìˆ˜ìˆ˜ë£Œ ê³„ì‚°, ìŠ¬ë¦¬í”¼ì§€ ì²˜ë¦¬, ë¶„í•  ì£¼ë¬¸

#### LiquidityAnalyzer (`src/trading/liquidity_analyzer.py`)

- ì˜¤ë”ë¶ ê¸°ë°˜ ì‹¤ì‹œê°„ ìŠ¬ë¦¬í”¼ì§€ ê³„ì‚°
- ìœ ë™ì„± ë¶€ì¡± ì‹œ ê±°ë˜ ì°¨ë‹¨

### 7. ë°±í…ŒìŠ¤íŒ… ì‹œìŠ¤í…œ (`src/backtesting/`)

- **Backtester**: ë°±í…ŒìŠ¤íŒ… ì—”ì§„
- **QuickBacktestFilter**: 12ê°€ì§€ í€€íŠ¸ í•„í„° ì ìš©
- **RuleBasedBreakoutStrategy**: ë³€ë™ì„± ëŒíŒŒ ì „ëµ (3ë‹¨ê³„ ê´€ë¬¸)

## ğŸ”„ ì‹œìŠ¤í…œ ì›Œí¬í”Œë¡œìš°

### 1. ë©€í‹°ì½”ì¸ íŒŒì´í”„ë¼ì¸ í”Œë¡œìš° (use_multi_coin=True)

```
[scheduler_main.py / main.py ì‹œì‘]
    â†“
[ì„œë¹„ìŠ¤ ì´ˆê¸°í™”]
  - UpbitClient, DataCollector
  - TradingService, AIService
  - PortfolioManager, CoinSelector
    â†“
[1ë‹¨ê³„: AdaptiveRiskCheckStage]
  [PortfolioManager ìƒíƒœ í™•ì¸]
    - í˜„ì¬ í¬ì§€ì…˜ ìˆ˜ í™•ì¸
    - ì¼ì¼/ì£¼ê°„ ì†ì‹¤ í•œë„ ì²´í¬
    - ê±°ë˜ ëª¨ë“œ ê²°ì •
    â†“
    â”œâ”€ [BLOCKED] â†’ âŒ ê±°ë˜ ì¤‘ë‹¨ (Safe Mode)
    â”œâ”€ [MANAGEMENT] â†’ í•˜ì´ë¸Œë¦¬ë“œ í¬ì§€ì…˜ ê´€ë¦¬ (ê·œì¹™ + AI)
    â””â”€ [ENTRY] â†’ âœ… ì½”ì¸ ìŠ¤ìºë‹ ì§„í–‰
    â†“
[2ë‹¨ê³„: CoinScanStage] (ENTRY ëª¨ë“œì—ì„œë§Œ)
  [LiquidityScanner]
    - ì—…ë¹„íŠ¸ KRW ë§ˆì¼“ ì „ì²´ ìŠ¤ìº”
    - ê±°ë˜ëŒ€ê¸ˆ 100ì–µì›+ í•„í„°ë§
    - ìƒìœ„ 20ê°œ ì½”ì¸ ì¶”ì¶œ
    â†“
  [HistoricalDataSync]
    - 2ë…„ì¹˜ ë°ì´í„° ë™ê¸°í™”
    - Parquet í˜•ì‹ ì €ì¥
    â†“
  [MultiCoinBacktest]
    - ThreadPoolExecutor ë³‘ë ¬ ë°±í…ŒìŠ¤íŒ…
    - 12ê°€ì§€ í€€íŠ¸ í•„í„° ì ìš©
    - ìƒìœ„ 5ê°œ ì½”ì¸ ì„ íƒ
    â†“
  [CoinSelector]
    - ìµœì¢… 2ê°œ ì½”ì¸ ì„ íƒ
    - ì»¨í…ìŠ¤íŠ¸ í‹°ì»¤ ì—…ë°ì´íŠ¸
    â†“
    â”œâ”€ [ì½”ì¸ ì—†ìŒ] â†’ âŒ ê±°ë˜ ì¤‘ë‹¨ (ì¡°ê±´ ë¯¸ë‹¬)
    â””â”€ [ì½”ì¸ ì„ íƒ] â†’ âœ… ë°ì´í„° ìˆ˜ì§‘ ì§„í–‰
    â†“
[3ë‹¨ê³„: DataCollectionStage]
  - ì„ íƒëœ ì½”ì¸ ì°¨íŠ¸ ë°ì´í„° (+ BTC)
  - ì˜¤ë”ë¶
  - BTC-ì½”ì¸ ìƒê´€ê´€ê³„
    â†“
[4ë‹¨ê³„: AnalysisStage]
  [EntryAnalyzer]
    - ë¦¬ìŠ¤í¬ í—Œí„° ì—­í• 
    - ì§„ì… ì‹ í˜¸ ì ìˆ˜ ê³„ì‚°
    - AI íŒë‹¨ + ê²€ì¦
    â†“
    â”œâ”€ [ê²€ì¦ ì‹¤íŒ¨] â†’ âŒ ê±°ë˜ ì¤‘ë‹¨
    â””â”€ [ê²€ì¦ í†µê³¼] â†’ âœ… ê±°ë˜ ì‹¤í–‰
    â†“
[5ë‹¨ê³„: ExecutionStage]
  - LiquidityAnalyzer ìœ ë™ì„± í™•ì¸
  - ì‹¤ì œ ì£¼ë¬¸ ì‹¤í–‰
  - ê±°ë˜ ê¸°ë¡ ë° ì•Œë¦¼
```

### 2. í•˜ì´ë¸Œë¦¬ë“œ í¬ì§€ì…˜ ê´€ë¦¬ í”Œë¡œìš° (MANAGEMENT ëª¨ë“œ)

```
[AdaptiveRiskCheckStageì—ì„œ MANAGEMENT ëª¨ë“œ ë¶„ê¸°]
    â†“
[PositionAnalyzer ì‹¤í–‰]
    â†“
[ê·œì¹™ ê¸°ë°˜ ì²´í¬ (ë¬´ë£Œ)]
  - ì†ì ˆ ì²´í¬: ìˆ˜ìµë¥  <= -5%
  - ìµì ˆ ì²´í¬: ìˆ˜ìµë¥  >= +10%
  - Fakeout ì²´í¬: 3ë´‰ ë‚´ -2%
  - íƒ€ì„ì•„ì›ƒ ì²´í¬: 24ì‹œê°„ + ìˆ˜ìµë¥  < 2%
  - ADX ì•½í™” ì²´í¬: < 20 (6ì‹œê°„ ì´í›„)
  - íŠ¸ë ˆì¼ë§ ìŠ¤íƒ‘: +5% ì´ìƒ ì‹œ ì¡°ì •
    â†“
    â”œâ”€ [ê·œì¹™ ë°œë™] â†’ ì¦‰ì‹œ ì²­ì‚°/ë³´ìœ  ê²°ì • ($0)
    â””â”€ [ì• ë§¤í•œ ìƒí™©] â†’ AI ë¶„ì„ í•„ìš”
    â†“
[AI ë¶„ì„ í•„ìš” ì¡°ê±´ ì²´í¬]
  - ìˆ˜ìµ 2% ~ 8% êµ¬ê°„
  - ADX 25-30 êµ¬ê°„
  - ê±°ë˜ëŸ‰-ê°€ê²© ê´´ë¦¬
    â†“
    â”œâ”€ [AI ë¶ˆí•„ìš”] â†’ ê·œì¹™ ê¸°ë°˜ ê²°ì • ($0)
    â””â”€ [AI í•„ìš”] â†’ AIService í˜¸ì¶œ (~$0.09)
    â†“
[ì²­ì‚°/ë³´ë¥˜ ì‹¤í–‰]
```

### 3. ìŠ¤ì¼€ì¤„ëŸ¬ ìë™ íŠ¸ë ˆì´ë”© (scheduler_main.py)

```
APScheduler (1ì‹œê°„ ì£¼ê¸°)
    â†“
ì„œë¹„ìŠ¤ ì´ˆê¸°í™”
    â†“
execute_trading_cycle(use_multi_coin=True/False) í˜¸ì¶œ
    â†“
ë©€í‹°ì½”ì¸ íŒŒì´í”„ë¼ì¸ ë˜ëŠ” ì ì‘í˜• íŒŒì´í”„ë¼ì¸ ì‹¤í–‰
    â†“
Telegram 4-Stage ì•Œë¦¼
  1. ì‚¬ì´í´ ì‹œì‘
  2. ë°±í…ŒìŠ¤íŒ… ê²°ê³¼ (ë©€í‹°ì½”ì¸ ì‹œ ìŠ¤ìº” ê²°ê³¼)
  3. AI íŒë‹¨
  4. í¬íŠ¸í´ë¦¬ì˜¤ í˜„í™©
    â†“
Prometheus ë©”íŠ¸ë¦­ ê¸°ë¡
```

## ğŸ— ê³„ì¸µ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Entry Layer (ì§„ì…ì )                 â”‚
â”‚  - main.py (ì‹¤ì „ ê±°ë˜)                           â”‚
â”‚  - scheduler_main.py (ìŠ¤ì¼€ì¤„ëŸ¬)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Pipeline Layer (ì ì‘í˜• íŒŒì´í”„ë¼ì¸)        â”‚
â”‚  - AdaptiveRiskCheckStage (í¬ì§€ì…˜ ë¶„ê¸°)          â”‚
â”‚  - CoinScanStage (ë©€í‹°ì½”ì¸ ìŠ¤ìºë‹)               â”‚
â”‚  - DataCollectionStage (ë°ì´í„° ìˆ˜ì§‘)             â”‚
â”‚  - AnalysisStage (ë¶„ì„)                          â”‚
â”‚  - ExecutionStage (ê±°ë˜ ì‹¤í–‰)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Service Layer (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§)            â”‚
â”‚  - EntryAnalyzer (ì§„ì… ë¶„ì„)                     â”‚
â”‚  - PositionAnalyzer (í¬ì§€ì…˜ ê´€ë¦¬)                â”‚
â”‚  - PortfolioManager (í¬íŠ¸í´ë¦¬ì˜¤ ê´€ë¦¬)            â”‚
â”‚  - CoinSelector (ì½”ì¸ ì„ íƒ)                      â”‚
â”‚  - TradingService (ê±°ë˜ ì‹¤í–‰)                    â”‚
â”‚  - RiskManager (ë¦¬ìŠ¤í¬ ê´€ë¦¬)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Scanner Layer (ìŠ¤ìºë‹ ì‹œìŠ¤í…œ)            â”‚
â”‚  - LiquidityScanner (ìœ ë™ì„± ìŠ¤ìº”)                â”‚
â”‚  - HistoricalDataSync (ë°ì´í„° ë™ê¸°í™”)            â”‚
â”‚  - MultiCoinBacktest (ë³‘ë ¬ ë°±í…ŒìŠ¤íŒ…)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             Data Layer (ë°ì´í„° ê³„ì¸µ)               â”‚
â”‚  - UpbitClient (API í´ë¼ì´ì–¸íŠ¸)                  â”‚
â”‚  - DataCollector (ì‹¤ì‹œê°„ ë°ì´í„°)                 â”‚
â”‚  - HistoricalDataProvider (ê³¼ê±° ë°ì´í„°)          â”‚
â”‚  - TechnicalIndicators (ê¸°ìˆ ì  ì§€í‘œ)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Infrastructure Layer (ì¸í”„ë¼)             â”‚
â”‚  - Logger (ë¡œê¹…)                                 â”‚
â”‚  - Config (ì„¤ì •)                                 â”‚
â”‚  - PostgreSQL (Grafana ì—°ë™)                     â”‚
â”‚  - Parquet Storage (ë°±í…ŒìŠ¤íŒ… ë°ì´í„°)             â”‚
â”‚  - Prometheus (ë©”íŠ¸ë¦­)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

### Trades (ê±°ë˜ ë‚´ì—­)

```sql
CREATE TABLE trades (
    id SERIAL PRIMARY KEY,
    trade_id VARCHAR(100) UNIQUE NOT NULL,
    symbol VARCHAR(20) NOT NULL,
    side VARCHAR(10) NOT NULL,  -- 'buy' or 'sell'
    price DECIMAL(20, 8) NOT NULL,
    amount DECIMAL(20, 8) NOT NULL,
    total DECIMAL(20, 8) NOT NULL,
    fee DECIMAL(20, 8) DEFAULT 0,
    status VARCHAR(20) NOT NULL,
    created_at TIMESTAMP NOT NULL DEFAULT NOW(),
    updated_at TIMESTAMP NOT NULL DEFAULT NOW()
);
```

### AI Decisions (AI íŒë‹¨ ë¡œê·¸)

```sql
CREATE TABLE ai_decisions (
    id SERIAL PRIMARY KEY,
    symbol VARCHAR(20) NOT NULL,
    decision VARCHAR(20) NOT NULL,
    confidence DECIMAL(5, 2),
    reason TEXT,
    analyzer_type VARCHAR(20),  -- 'entry' or 'position'
    market_data JSONB,
    created_at TIMESTAMP NOT NULL DEFAULT NOW()
);
```

### Portfolio (í¬íŠ¸í´ë¦¬ì˜¤ ìŠ¤ëƒ…ìƒ·)

```sql
CREATE TABLE portfolio_snapshots (
    id SERIAL PRIMARY KEY,
    total_value_krw DECIMAL(20, 2) NOT NULL,
    positions JSONB NOT NULL,  -- {symbol: {amount, value, profit_rate}}
    position_count INTEGER DEFAULT 0,
    trading_mode VARCHAR(20),  -- 'ENTRY', 'MANAGEMENT', 'BLOCKED'
    created_at TIMESTAMP NOT NULL DEFAULT NOW()
);
```

### Scan Results (ìŠ¤ìº” ê²°ê³¼) ğŸ†•

```sql
CREATE TABLE scan_results (
    id SERIAL PRIMARY KEY,
    scan_type VARCHAR(20) NOT NULL,  -- 'liquidity', 'backtest', 'final'
    coins_scanned INTEGER,
    coins_passed INTEGER,
    selected_coins JSONB,  -- [{ticker, score, grade}]
    scan_duration_seconds DECIMAL(10, 2),
    created_at TIMESTAMP NOT NULL DEFAULT NOW()
);
```

## ğŸ’° ë¹„ìš© ë¶„ì„

### í•˜ì´ë¸Œë¦¬ë“œ í¬ì§€ì…˜ ê´€ë¦¬

| ìƒí™© | AI í˜¸ì¶œ | ë¹„ìš© |
|------|--------|------|
| ì†ì ˆ/ìµì ˆ ë°œë™ | âŒ ê·œì¹™ ê¸°ë°˜ | $0 |
| ëª…í™•í•œ HOLD | âŒ ê·œì¹™ ê¸°ë°˜ | $0 |
| ì• ë§¤í•œ ìƒí™© (30%) | âœ… AI ë¶„ì„ | ~$0.09 |
| **ì›” ì˜ˆìƒ** | | **~$10** |

### ë©€í‹°ì½”ì¸ ìŠ¤ìºë‹

| ë‹¨ê³„ | í˜¸ì¶œ ìˆ˜ | ë¹„ìš© |
|------|--------|------|
| ìœ ë™ì„± ìŠ¤ìº” | ë¬´ë£Œ (API) | $0 |
| ë°±í…ŒìŠ¤íŒ… | ë¬´ë£Œ (ë¡œì»¬) | $0 |
| AI ì§„ì… ë¶„ì„ (5ê°œ/ì‹œê°„) | 720 * 5 = 3,600/ì›” | ~$32 |
| **ì´ ì›” ì˜ˆìƒ** | | **~$42** |

## ğŸ“Š ëª¨ë‹ˆí„°ë§ ë©”íŠ¸ë¦­

### íŠ¸ë ˆì´ë”© ë©”íŠ¸ë¦­

```python
trades_total                  # ì´ ê±°ë˜ ìˆ˜ (buy/sell êµ¬ë¶„)
trade_volume_krw_total        # ì´ ê±°ë˜ ê¸ˆì•¡ (KRW)
trade_fee_krw_total           # ì´ ìˆ˜ìˆ˜ë£Œ (KRW)
slippage_pct                  # ìŠ¬ë¦¬í”¼ì§€ ë¹„ìœ¨ (%)
```

### AI ë©”íŠ¸ë¦­

```python
ai_decisions_total            # AI íŒë‹¨ ìˆ˜ (buy/sell/hold êµ¬ë¶„)
ai_confidence                 # AI ì‹ ë¢°ë„
ai_validation_failures_total  # AI ê²€ì¦ ì‹¤íŒ¨ íšŸìˆ˜
entry_analyzer_calls_total    # ì§„ì… ë¶„ì„ê¸° í˜¸ì¶œ ìˆ˜
position_analyzer_calls_total # í¬ì§€ì…˜ ë¶„ì„ê¸° í˜¸ì¶œ ìˆ˜
```

### ğŸ†• ë©€í‹°ì½”ì¸ ìŠ¤ìºë‹ ë©”íŠ¸ë¦­

```python
coin_scan_total               # ì½”ì¸ ìŠ¤ìº” íšŸìˆ˜
coins_scanned_total           # ìŠ¤ìº”ëœ ì½”ì¸ ìˆ˜
coins_passed_backtest_total   # ë°±í…ŒìŠ¤íŒ… í†µê³¼ ì½”ì¸ ìˆ˜
coins_selected_total          # ìµœì¢… ì„ íƒ ì½”ì¸ ìˆ˜
scan_duration_seconds         # ìŠ¤ìº” ì†Œìš” ì‹œê°„
```

### í¬íŠ¸í´ë¦¬ì˜¤ ë©”íŠ¸ë¦­

```python
portfolio_value_krw           # í¬íŠ¸í´ë¦¬ì˜¤ ì´ ê°€ì¹˜ (KRW)
portfolio_profit_rate         # ìˆ˜ìµë¥  (%)
portfolio_position_count      # í˜„ì¬ í¬ì§€ì…˜ ìˆ˜
portfolio_trading_mode        # ê±°ë˜ ëª¨ë“œ (ENTRY/MANAGEMENT/BLOCKED)
```

### ë¦¬ìŠ¤í¬ ê´€ë¦¬ ë©”íŠ¸ë¦­

```python
risk_circuit_breaker_triggers_total  # Circuit Breaker ë°œë™ íšŸìˆ˜
risk_stop_loss_triggers_total       # ì†ì ˆ ë°œë™ íšŸìˆ˜
risk_take_profit_triggers_total     # ìµì ˆ ë°œë™ íšŸìˆ˜
risk_daily_pnl_pct                  # ì¼ì¼ ì†ìµë¥  (%)
risk_safe_mode_active               # Safe Mode í™œì„± ìƒíƒœ
```

## ğŸ” ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

1. **í™˜ê²½ ë³€ìˆ˜**: `.env` íŒŒì¼ë¡œ ë¯¼ê° ì •ë³´ ê´€ë¦¬
2. **API í‚¤ ë³´ì•ˆ**: Upbit/OpenAI API í‚¤ ì•”í˜¸í™” ì €ì¥
3. **Rate Limiting**: Upbit API ë¶„ë‹¹ 600íšŒ ì œí•œ ì¤€ìˆ˜

## ğŸ“ˆ í™•ì¥ì„± ê³ ë ¤ì‚¬í•­

1. **ë©€í‹°ì½”ì¸ ì§€ì›**: ìµœëŒ€ 3ê°œ ì½”ì¸ ë™ì‹œ ê±°ë˜ (í™•ì¥ ê°€ëŠ¥)
2. **ë‹¤ì¤‘ ê±°ë˜ì†Œ**: ì¶”ìƒí™”ëœ ê±°ë˜ì†Œ ì¸í„°í˜ì´ìŠ¤ (`IExchangeClient`)
3. **ë³‘ë ¬ ì²˜ë¦¬**: ThreadPoolExecutorë¡œ ë°±í…ŒìŠ¤íŒ… ë³‘ë ¬í™”
4. **í´ë¼ìš°ë“œ í™•ì¥**: Kubernetesë¡œ ìˆ˜í‰ í™•ì¥

## ğŸ¨ ì„¤ê³„ ì›ì¹™

### 1. ì ì‘í˜• íŒŒì´í”„ë¼ì¸ (Adaptive Pipeline)

- í¬ì§€ì…˜ ìœ ë¬´ì— ë”°ë¼ ìë™ìœ¼ë¡œ ë‹¤ë¥¸ ê²½ë¡œ ì‹¤í–‰
- ENTRY ëª¨ë“œ: ìŠ¤ìºë‹ â†’ ì§„ì… ë¶„ì„
- MANAGEMENT ëª¨ë“œ: í•˜ì´ë¸Œë¦¬ë“œ í¬ì§€ì…˜ ê´€ë¦¬

### 2. ë¹„ìš© ìµœì í™” (Cost Optimization)

- ê·œì¹™ ê¸°ë°˜ ìš°ì„ : 70% ì¼€ì´ìŠ¤ ë¬´ë£Œ ì²˜ë¦¬
- AIëŠ” ì• ë§¤í•œ ìƒí™©ì—ì„œë§Œ í˜¸ì¶œ (30%)
- ì›” $42 ì˜ˆìƒ ë¹„ìš©

### 3. í€€íŠ¸ ê¸°ì¤€ í•„í„°ë§

- 12ê°€ì§€ í•„í„° ì¡°ê±´ (Sharpe, Sortino, Calmar ë“±)
- í†µê³„ì  ìœ ì˜ì„± í™•ë³´ (ìµœì†Œ 20íšŒ ê±°ë˜)
- ë¦¬ìŠ¤í¬ ê´€ë¦¬ ë‚´ì¥ (MDD 15%, ì—°ì†ì†ì‹¤ 5íšŒ)

### 4. ì˜ì¡´ì„± ì—­ì „ ì›ì¹™ (DIP)

- `TradingService`ëŠ” `IExchangeClient` ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´
- êµ¬ì²´ êµ¬í˜„ì²´ êµì²´ ê°€ëŠ¥ (í…ŒìŠ¤íŠ¸ ìš©ì´)

## ğŸ› Clean Architecture (Hexagonal/Ports & Adapters)

### ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Presentation Layer                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  CLI Runner     â”‚  â”‚   Scheduler     â”‚  â”‚   API (Future)  â”‚         â”‚
â”‚  â”‚ (trading_runner)â”‚  â”‚(scheduler_main) â”‚  â”‚                 â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                     â”‚                     â”‚
            â–¼                     â–¼                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Application Layer (Use Cases)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ExecuteTradeUseCaseâ”‚ â”‚AnalyzeMarketUseCaseâ”‚ â”‚ManagePositionUseCaseâ”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚           â”‚                    â”‚                    â”‚                   â”‚
â”‚           â–¼                    â–¼                    â–¼                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚                        Ports (Interfaces)                    â”‚       â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚       â”‚
â”‚  â”‚  â”‚ExchangePortâ”‚ â”‚  AIPort   â”‚ â”‚MarketDataPortâ”‚ â”‚PersistencePortâ”‚    â”‚       â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            Domain Layer                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚                     Entities                                  â”‚       â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚       â”‚
â”‚  â”‚  â”‚  Trade   â”‚  â”‚  Order   â”‚  â”‚ Position â”‚                   â”‚       â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚                   Value Objects                               â”‚       â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚       â”‚
â”‚  â”‚  â”‚  Money   â”‚  â”‚Percentageâ”‚                                  â”‚       â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚                  Domain Services                              â”‚       â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚       â”‚
â”‚  â”‚  â”‚FeeCalculator â”‚  â”‚RiskCalculatorâ”‚                          â”‚       â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â–²
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Infrastructure Layer                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚                        Adapters                               â”‚       â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚       â”‚
â”‚  â”‚  â”‚UpbitExchangeAdapterâ”‚ â”‚  OpenAIAdapter   â”‚                  â”‚       â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚       â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚       â”‚
â”‚  â”‚  â”‚UpbitMarketDataAdapterâ”‚ â”‚InMemoryPersistenceâ”‚                â”‚       â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚                   Legacy Bridge Adapters                      â”‚       â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚       â”‚
â”‚  â”‚  â”‚LegacyExchangeAdapterâ”‚ â”‚ LegacyAIAdapter  â”‚                  â”‚       â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚       â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚       â”‚
â”‚  â”‚  â”‚LegacyMarketDataAdapterâ”‚                                      â”‚       â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ë ˆì´ì–´ ì„¤ëª…

| ë ˆì´ì–´ | ì—­í•  | ì˜ì¡´ì„± ë°©í–¥ |
|--------|------|-------------|
| **Presentation** | ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ (CLI, Scheduler, API) | â†’ Application |
| **Application** | ìœ ì¦ˆì¼€ì´ìŠ¤ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ | â†’ Domain, â† Infrastructure (via Ports) |
| **Domain** | ìˆœìˆ˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ (ì™¸ë¶€ ì˜ì¡´ì„± ì—†ìŒ) | ì—†ìŒ |
| **Infrastructure** | ì™¸ë¶€ ì‹œìŠ¤í…œ ì–´ëŒ‘í„° (Exchange, AI, DB) | â†’ Application (Ports êµ¬í˜„) |

### ì£¼ìš” ì»´í¬ë„ŒíŠ¸

#### Domain Layer (`src/domain/`)
```
src/domain/
â”œâ”€â”€ entities/
â”‚   â””â”€â”€ trade.py           # Trade, Order, Position ì—”í‹°í‹°
â”œâ”€â”€ value_objects/
â”‚   â”œâ”€â”€ money.py           # Money, Currency ê°’ ê°ì²´
â”‚   â””â”€â”€ percentage.py      # Percentage, Ratio ê°’ ê°ì²´
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ fee_calculator.py  # ìˆ˜ìˆ˜ë£Œ ê³„ì‚° ë„ë©”ì¸ ì„œë¹„ìŠ¤
â”‚   â””â”€â”€ risk_calculator.py # ë¦¬ìŠ¤í¬ í‰ê°€ ë„ë©”ì¸ ì„œë¹„ìŠ¤
â””â”€â”€ exceptions.py          # ë„ë©”ì¸ ì˜ˆì™¸
```

#### Application Layer (`src/application/`)
```
src/application/
â”œâ”€â”€ ports/
â”‚   â””â”€â”€ outbound/
â”‚       â”œâ”€â”€ exchange_port.py     # ê±°ë˜ì†Œ í¬íŠ¸ ì¸í„°í˜ì´ìŠ¤
â”‚       â”œâ”€â”€ ai_port.py           # AI ë¶„ì„ í¬íŠ¸ ì¸í„°í˜ì´ìŠ¤
â”‚       â”œâ”€â”€ market_data_port.py  # ì‹œì¥ ë°ì´í„° í¬íŠ¸ ì¸í„°í˜ì´ìŠ¤
â”‚       â””â”€â”€ persistence_port.py  # ì˜ì†ì„± í¬íŠ¸ ì¸í„°í˜ì´ìŠ¤
â”œâ”€â”€ use_cases/
â”‚   â”œâ”€â”€ execute_trade.py    # ê±°ë˜ ì‹¤í–‰ ìœ ì¦ˆì¼€ì´ìŠ¤
â”‚   â”œâ”€â”€ analyze_market.py   # ì‹œì¥ ë¶„ì„ ìœ ì¦ˆì¼€ì´ìŠ¤
â”‚   â””â”€â”€ manage_position.py  # í¬ì§€ì…˜ ê´€ë¦¬ ìœ ì¦ˆì¼€ì´ìŠ¤
â””â”€â”€ dto/
    â”œâ”€â”€ analysis.py         # ë¶„ì„ ê´€ë ¨ DTO
    â””â”€â”€ trading.py          # ê±°ë˜ ê´€ë ¨ DTO
```

#### Infrastructure Layer (`src/infrastructure/`)
```
src/infrastructure/
â””â”€â”€ adapters/
    â”œâ”€â”€ exchange/
    â”‚   â””â”€â”€ upbit_adapter.py       # Upbit ExchangePort êµ¬í˜„
    â”œâ”€â”€ ai/
    â”‚   â””â”€â”€ openai_adapter.py      # OpenAI AIPort êµ¬í˜„
    â”œâ”€â”€ market_data/
    â”‚   â””â”€â”€ upbit_data_adapter.py  # Upbit MarketDataPort êµ¬í˜„
    â”œâ”€â”€ persistence/
    â”‚   â””â”€â”€ memory_adapter.py      # In-Memory PersistencePort êµ¬í˜„
    â””â”€â”€ legacy_bridge.py           # ë ˆê±°ì‹œ ì„œë¹„ìŠ¤ ë¸Œë¦¿ì§€ ì–´ëŒ‘í„°
```

#### Presentation Layer (`src/presentation/`)
```
src/presentation/
â””â”€â”€ cli/
    â””â”€â”€ trading_runner.py   # CLI íŠ¸ë ˆì´ë”© ëŸ¬ë„ˆ
```

### DI Container (`src/container.py`)

ì˜ì¡´ì„± ì£¼ì… ì»¨í…Œì´ë„ˆê°€ ëª¨ë“  ë ˆì´ì–´ë¥¼ ì—°ê²°í•©ë‹ˆë‹¤:

```python
from src.container import Container

# í”„ë¡œë•ì…˜ ì‚¬ìš©
container = Container()
execute_trade = container.get_execute_trade_use_case()

# í…ŒìŠ¤íŠ¸ ì‚¬ìš© (Mock ì–´ëŒ‘í„°)
container = Container.create_for_testing()

# ë ˆê±°ì‹œ ì„œë¹„ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜
container = Container.create_from_legacy(
    upbit_client=existing_upbit_client,
    ai_service=existing_ai_service,
    data_collector=existing_data_collector
)
```

### ë ˆê±°ì‹œ ë§ˆì´ê·¸ë ˆì´ì…˜ ì „ëµ

ê¸°ì¡´ ì½”ë“œì—ì„œ Clean Architectureë¡œ ì ì§„ì  ë§ˆì´ê·¸ë ˆì´ì…˜:

```python
# ê¸°ì¡´ ì½”ë“œ (before)
from src.api.upbit_client import UpbitClient
upbit = UpbitClient()
result = upbit.buy_market_order("KRW-BTC", 100000)

# Clean Architecture (after)
from src.container import Container
container = Container.create_from_legacy(upbit_client=upbit)
execute_trade = container.get_execute_trade_use_case()
result = await execute_trade.execute_buy("KRW-BTC", Money.krw(100000))
```

### í…ŒìŠ¤íŠ¸ ì „ëµ

| ë ˆì´ì–´ | í…ŒìŠ¤íŠ¸ ìœ í˜• | Mock ì‚¬ìš© |
|--------|-------------|-----------|
| Domain | Unit Test | ì—†ìŒ (ìˆœìˆ˜ ë¡œì§) |
| Application | Unit Test | Port Interface Mock |
| Infrastructure | Integration Test | ì™¸ë¶€ API Mock |
| Presentation | E2E Test | Container Mock |

```bash
# ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
python -m pytest tests/ -v

# ë„ë©”ì¸ ë ˆì´ì–´ë§Œ í…ŒìŠ¤íŠ¸
python -m pytest tests/unit/domain/ -v

# ì»¤ë²„ë¦¬ì§€ í™•ì¸
python -m pytest tests/ --cov=src --cov-report=html
```

## ğŸ“š ê´€ë ¨ ë¬¸ì„œ

- **ë©€í‹°ì½”ì¸ êµ¬í˜„ ê°€ì´ë“œ**: [MULTI_COIN_IMPLEMENTATION.md](./MULTI_COIN_IMPLEMENTATION.md) - ğŸ†• ë©€í‹°ì½”ì¸ ìŠ¤ìºë‹ ì‹œìŠ¤í…œ ì™„ë²½ ê°€ì´ë“œ
- **ì‚¬ìš©ì ê°€ì´ë“œ**: [USER_GUIDE.md](./USER_GUIDE.md) - ì„¤ì¹˜ë¶€í„° ìš´ì˜ê¹Œì§€
- **Docker ê°€ì´ë“œ**: [DOCKER_GUIDE.md](./DOCKER_GUIDE.md) - Docker ì‹¤í–‰ ë° ê´€ë¦¬
- **ìŠ¤ì¼€ì¤„ëŸ¬ ê°€ì´ë“œ**: [SCHEDULER_GUIDE.md](./SCHEDULER_GUIDE.md) - 1ì‹œê°„ ì£¼ê¸° ìë™ ê±°ë˜
- **ëª¨ë‹ˆí„°ë§ ê°€ì´ë“œ**: [MONITORING_GUIDE.md](./MONITORING_GUIDE.md) - Grafana + Prometheus ì„¤ì •
- **ë¦¬ìŠ¤í¬ ê´€ë¦¬ ì„¤ì •**: [RISK_MANAGEMENT_CONFIG.md](./RISK_MANAGEMENT_CONFIG.md) - ë¦¬ìŠ¤í¬ ê´€ë¦¬ ì‹œìŠ¤í…œ ê°€ì´ë“œ

---

## ğŸ”„ ë³€ê²½ ì´ë ¥

### v4.0.0 (2026-01-02) - ë©€í‹°ì½”ì¸ ìŠ¤ìºë‹ ì‹œìŠ¤í…œ ğŸ†•

**ì£¼ìš” ë³€ê²½ì‚¬í•­**:

1. **ë©€í‹°ì½”ì¸ ìŠ¤ìºë‹ ëª¨ë“ˆ ì¶”ê°€** (`src/scanner/`)
   - LiquidityScanner: ì—…ë¹„íŠ¸ ìœ ë™ì„± ìƒìœ„ ì½”ì¸ ìŠ¤ìº”
   - HistoricalDataSync: Parquet ê¸°ë°˜ ë°ì´í„° ë™ê¸°í™”
   - MultiCoinBacktest: 12ê°€ì§€ í€€íŠ¸ í•„í„° ë³‘ë ¬ ë°±í…ŒìŠ¤íŒ…
   - CoinSelector: 5ë‹¨ê³„ ì½”ì¸ ì„ íƒ íŒŒì´í”„ë¼ì¸

2. **ì ì‘í˜• íŒŒì´í”„ë¼ì¸ ë„ì…** (`src/trading/pipeline/`)
   - AdaptiveRiskCheckStage: í¬ì§€ì…˜ ìƒíƒœ ê¸°ë°˜ ëª¨ë“œ ë¶„ê¸°
   - CoinScanStage: ENTRY ëª¨ë“œ ë©€í‹°ì½”ì¸ ìŠ¤ìºë‹

3. **í¬ì§€ì…˜ ë¶„ë¦¬ ì‹œìŠ¤í…œ** (`src/ai/`, `src/position/`)
   - EntryAnalyzer: ì§„ì… ì „ìš© ë¶„ì„ê¸° (ë¦¬ìŠ¤í¬ í—Œí„°)
   - PositionAnalyzer: í•˜ì´ë¸Œë¦¬ë“œ í¬ì§€ì…˜ ê´€ë¦¬ (ê·œì¹™ 70% + AI 30%)
   - PortfolioManager: ìµœëŒ€ 3ê°œ ì½”ì¸ ë™ì‹œ ê´€ë¦¬

4. **í€€íŠ¸ ê¸°ì¤€ ê°•í™”**
   - 12ê°€ì§€ í•„í„° ì¡°ê±´ (Sharpe, Sortino, Calmar ë“±)
   - QuickBacktestConfigì™€ MultiBacktestConfig ë™ê¸°í™”

5. **ë¹„ìš© ìµœì í™”**
   - ê·œì¹™ ê¸°ë°˜ ìš°ì„  ì²˜ë¦¬ (70% ë¬´ë£Œ)
   - ì›” ì˜ˆìƒ ë¹„ìš© ~$42

### v3.2.0 (2026-01-01) - íŒŒì´í”„ë¼ì¸ ì•„í‚¤í…ì²˜ ì „í™˜

- 4-Stage íŒŒì´í”„ë¼ì¸: Risk â†’ Data â†’ Analysis â†’ Execution
- FastAPI Backend ì œê±° (Grafana ì§ì ‘ PostgreSQL ì—°ë™)

### v3.1.0 (2025-12-31)

- ë¦¬ìŠ¤í¬ ê´€ë¦¬ ì‹œìŠ¤í…œ í†µí•©
- AI ê²€ì¦ ë ˆì´ì–´ ê°•í™”
- ìœ ë™ì„± ë¶„ì„ ëª¨ë“ˆ ì¶”ê°€

---

**í˜„ì¬ ë²„ì „**: 4.0.0
**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2026-01-02
**ì•„í‚¤í…ì²˜**: Multi-Coin Scanning + Adaptive Pipeline + Portfolio Management
**ìƒíƒœ**: í”„ë¡œë•ì…˜ ì¤€ë¹„ ì™„ë£Œ âœ…
**ë¬¸ì„œ ìƒíƒœ**: âœ¨ ë©€í‹°ì½”ì¸ ìŠ¤ìºë‹ ì‹œìŠ¤í…œ ì™„ë£Œ
